Addon.initialize({
  // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—è–≤—è—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
  'card_buttons': async (cardButtonsContext) => {
    const buttons = [];

    buttons.push({
      text: 'üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ò–ù–ù',
      callback: async (buttonContext) => {
        // –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ø–∞–ø —Å —Ñ–æ—Ä–º–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ò–ù–ù
        return buttonContext.openPopup({
          type: 'iframe',
          title: '–ü—Ä–æ–≤–µ—Ä–∫–∞ –ò–ù–ù –∫–æ–º–ø–∞–Ω–∏–∏',
          // –ü—É—Ç—å –∫ HTML —Ñ–∞–π–ª—É –≤–Ω—É—Ç—Ä–∏ –∞–¥–¥–æ–Ω–∞, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç –∫–æ—Ä–Ω—è GitHub Pages
          url: '/public/views/check-inn.html',
          height: 500, // –£–≤–µ–ª–∏—á–µ–Ω–∞ –≤—ã—Å–æ—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞
          width: 700
        });
      }
    });

    return buttons;
  },

  // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–µ–π–¥–∂–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Ñ–∞—Å–∞–¥–µ –∫–∞—Ä—Ç–æ—á–∫–∏
  'card_facade_badges': async (context) => {
    // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ò–ù–ù –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–∫–∏
    const isChecked = await context.getData('card', 'private', 'innChecked');
    
    if (isChecked) {
      return {
        text: '‚úÖ –ò–ù–ù –ø—Ä–æ–≤–µ—Ä–µ–Ω',
        color: 'green' // –¶–≤–µ—Ç –±–µ–π–¥–∂–∞
      };
    }
    return null; // –ï—Å–ª–∏ –ò–ù–ù –Ω–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω, –±–µ–π–¥–∂ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
  },

  // –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Ç–µ–ª–æ –∫–∞—Ä—Ç–æ—á–∫–∏
  'card_body_section': async (bodySectionContext) => {
    // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ò–ù–ù
    const checkData = await bodySectionContext.getData('card', 'private', 'innCheckData');
    
    if (!checkData) {
      return []; // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Å–µ–∫—Ü–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
    }

    return [{
      title: 'üè¢ –î–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏', // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏
      content: {
        type: 'iframe',
        // –ü—É—Ç—å –∫ HTML —Ñ–∞–π–ª—É, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–æ–±—Ä–∞–∑–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
        // bodySectionContext.signUrl() –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ iframe
        url: bodySectionContext.signUrl('/public/views/check-result.html'),
        height: 400, // –í—ã—Å–æ—Ç–∞ iframe –≤–Ω—É—Ç—Ä–∏ —Å–µ–∫—Ü–∏–∏
      }
    }];
  }
});
